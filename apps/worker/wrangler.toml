name = "podcast-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[vars]
PODCAST_TITLE = "番組名"
WEBSITE_URL = "https://example.com"
R2_ACCOUNT_ID = "f79879b4bd3520260744db022329425d"
R2_BUCKET_NAME = "podcast-bucket"
R2_PUBLIC_URL = "https://pub-3084e431ea244accadaf06c7023bf1f8.r2.dev"  # R2 Public Access を有効化後に設定
CF_ACCESS_TEAM_DOMAIN = "sngazm.cloudflareaccess.com"
CF_ACCESS_AUD = "5269d12ad25457e6c5f25a6c8565eafab46cc4817164401abe12982c405263a9"

[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "podcast-bucket"
preview_bucket_name = "podcast-bucket-dev"  # wrangler dev 時に使用
remote = true  # wrangler dev でもリモートR2に接続

[triggers]
crons = ["*/5 * * * *"]

# Secrets (set via `wrangler secret put <NAME>`):
# - R2_ACCESS_KEY_ID
# - R2_SECRET_ACCESS_KEY
# - WEB_DEPLOY_HOOK_URL (optional: Cloudflare Pages Deploy Hook URL)

[dev]
persist = false  # 常に R2 dev バケットを使用（ローカルとの不整合を防ぐ）